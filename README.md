Link do Notion com imagens e telas: https://www.notion.so/HACKATHON-QI-TECH-27b69f3ceb3b807e92c7fab1cbbb922f?source=copy_link

## Produto: Venture Debt P2P para SaaS (will.lending)

O servi√ßo em quest√£o se trata de uma plataforma **P2P Crowdlending** especializada em **Financiamento Baseado em Receita (RBF) / Venture Debt**, voltada especificamente para o Growth Capital (capital de crescimento) de empresas _SaaS_ em **S√©rie A ou B**.

## 1. Oportunidade e Posicionamento

Com a ascens√£o do vibe coding, SaaS de IA se tornou a nova onda. Qualquer um pode transformar um rabisco em um site funcional usando Lovable ou Cursor, com custo praticamente nulo. Todavia, para levar o SaaS a um n√≠vel de excel√™ncia e escala, √© necess√°rio investir: investir em marketing, comunidade, contrata√ß√µes, etc. Para levar um SaaS em seed para graus superiores de maturidade, √© necess√°rio usar capital de terceiros. Justamente a fase de **S√©ries A e B** exige constante inje√ß√£o de capital de giro para financiar custos de expans√£o e Aquisi√ß√£o de Clientes (CAC).

O problema central √© a **dilui√ß√£o acion√°ria**: Muitos _founders_ e investidores s√£o for√ßados a vender _equity_ (participa√ß√£o social) caro para financiar custos vari√°veis previs√≠veis.

Nesse cen√°rio, alguns buscam empr√©stimos em bancos tradicionais ‚Äî e encontram uma porta fechada. O cr√©dito livre para micro e pequenas empresas no Brasil opera a taxas m√©dias de¬†**60% ao ano**, tornando qualquer financiamento de crescimento economicamente invi√°vel quando o ROI de marketing raramente ultrapassa 200-300% em 12 meses. Pior ainda, institui√ß√µes financeiras tradicionais simplesmente¬†**n√£o entendem o modelo SaaS**: exigem garantias f√≠sicas (im√≥veis, equipamentos, estoque) que empresas digitais n√£o possuem, avaliam risco com base em balan√ßos patrimoniais que ignoram o verdadeiro ativo ‚Äî a receita recorrente previs√≠vel (MRR/ARR) ‚Äî, e imp√µem processos burocr√°ticos que levam 45-90 dias para aprova√ß√£o, um tempo mortal para startups que precisam capitalizar janelas de crescimento em semanas. Para SaaS em S√©rie A/B, cujo valor reside em contratos de assinatura e n√£o em ativos tang√≠veis, o sistema banc√°rio tradicional √© estruturalmente incompat√≠vel: um fundador com R$ 200k de MRR crescendo 15% ao m√™s e NRR de 115% ‚Äî indicadores que sinalizam sa√∫de excepcional ‚Äî √© tratado como "alto risco" simplesmente por n√£o ter um im√≥vel para hipotecar. Essa desconex√£o sist√™mica for√ßa founders de volta ao √∫nico caminho dispon√≠vel: dilui√ß√£o acion√°ria cara para financiar custos operacionais previs√≠veis, vendendo participa√ß√£o permanente na empresa para cobrir despesas tempor√°rias de crescimento.

Nossa plataforma resolve essa inefici√™ncia, oferecendo **capital n√£o dilutivo** no momento em que ele √© mais crucial, ao mesmo tempo que abre um novo e rent√°vel ativo de d√≠vida para investidores.

## 2. A Solu√ß√£o: Estrutura de D√≠vida Indexada √† Performance (RBF)

Nossa plataforma n√£o oferece um empr√©stimo tradicional. Ela origina um **Contrato de M√∫tuo** (d√≠vida) com repagamento flex√≠vel, projetado para alinhar o risco ao crescimento da empresa:

### 2.1. D√≠vida com Juros Indexados √† Performance

A remunera√ß√£o do credor (o que seria o juro) √© indexada a uma **porcentagem da Receita Recorrente Mensal (MRR)** do tomador.

- **Prote√ß√£o ao Fluxo de Caixa:** Em meses de baixo crescimento, a parcela de pagamento cai, protegendo o caixa da _SaaS_ de obriga√ß√µes fixas.
- **Acelera√ß√£o:** Em meses de alto crescimento, o pagamento √© acelerado, liberando a empresa da d√≠vida mais rapidamente.

### 2.2. Gatilho Anti-_Equity_ (O M√∫ltiplo)

Para garantir a classifica√ß√£o legal como **d√≠vida** e **evitar ser caracterizado como participa√ß√£o acion√°ria (_equity_):**

- **Obriga√ß√µes Finitas:** O investimento √© um m√∫tuo com um **M√∫ltiplo de Pagamento (Cap)** predefinido (Ex: 1.3x o valor emprestado).
- **Teto de Retorno:** O M√∫ltiplo de Pagamento estabelece um teto de retorno final para o investidor. Ao atingir este _cap_, a obriga√ß√£o da _SaaS_ √© encerrada. Isso √© o que, legalmente, impede a classifica√ß√£o como _equity_, pois a participa√ß√£o no crescimento futuro da empresa √© limitada ao M√∫ltiplo acordado. O investimento √© um evento finito.

## 3. Risco e P√∫blico-Alvo

A plataforma utiliza uma abordagem conservadora, focada na gest√£o proativa da inadimpl√™ncia, para mitiga√ß√£o de risco.

### 3.1. Preven√ß√£o e Gest√£o de Inadimpl√™ncia: Vigil√¢ncia Proativa

Utilizamos tecnologia de ponta para resolver o principal problema do P2P: transformar o **Risco de Cr√©dito** em **Risco Operacional Monitor√°vel**.

- **Streaming de M√©tricas (Vis√£o 360¬∫):** Exigimos acesso via API a tr√™s fontes cr√≠ticas de dados ‚Äì **Billing** (MRR, NRR), **Usage** (Engajamento do Produto) e **ERP** (Custos/OPEX). Isso permite um c√°lculo cont√≠nuo e audit√°vel do **NRR, LTV:CAC, Burn Multiple e DSCR Ajustado**.
- **Gatilho de Alerta Antecipado (IA/ML):** Nosso motor de Machine Learning prioriza indicadores preditivos, isto √©, gatilhos **leading** antes de **lagging**. Prevemos o **Risco de Churn** (a verdadeira Inadimpl√™ncia no RBF) com semanas de anteced√™ncia, acionando _covenants_ proativos (como aumento de relat√≥rios) antes que indicadores _lagging_ (_Default_ _Runway_, _DSCR_, _Burn Multiple_) sinalizem a crise financeira no balan√ßo. A sa√∫de do **ARR** (a garantia da d√≠vida, o ativo subjacente) √© o nosso alerta de seguran√ßa prim√°rio.

### 3.2. P√∫blico-Alvo Estrat√©gico

Nossa plataforma √© otimizada para a efici√™ncia da capta√ß√£o e para a mitiga√ß√£o de risco regulat√≥rio.

- **Tomadores (SaaS S√©rie A/B):** Empresas com modelo de neg√≥cios e m√©tricas validados que buscam capital escal√°vel e n√£o dilutivo para financiar crescimento e custos operacionais.
- **Credores (Investidores):** Foco em **Investidores Qualificados**. Este p√∫blico possui o volume de capital (geralmente acima de R$ 1 mi) necess√°rio para fechar as rodadas de _Venture Debt_ do _SaaS_, cobrindo v√°rias opera√ß√µes. Eles s√£o o perfil ideal para absorver a natureza do ativo RBF, que combina a alta rentabilidade da _Fintech_ com o risco controlado pela garantia do ARR.
- **Evolu√ß√£o da Base de Investidores:**
  1. **Fase inicial** ‚Äì qualificados, com aportes maiores e menor dispers√£o.
  2. **Fase intermedi√°ria** ‚Äì cria√ß√£o de ve√≠culos estruturados (como t√≠tulos de d√≠vida ou fundos lastreados nos contratos originados pela plataforma), permitindo que investidores de varejo participem de forma indireta e regulada.
  3. **Fase futura** ‚Äì abertura para **varejo direto**, com investimentos acess√≠veis dentro da pr√≥pria plataforma, uma vez que houver hist√≥rico de performance, marca consolidada e arcabou√ßo regulat√≥rio adequado.

## 4. Entidades e Modelo de Dados

O modelo de dados reflete o core do nosso produto: uma plataforma _P2P Crowdlending_ que transforma o Risco de Cr√©dito em Risco Operacional Monitor√°vel atrav√©s do _streaming_ de dados. A arquitetura √© otimizada para a integridade transacional (ACID) e rastreabilidade para auditoria regulat√≥ria.

### 4.1. Fluxo de Dados e Eventos

A rela√ß√£o entre entidades tem uma motiva√ß√£o primordialmente procedural (operacional), organizacional e de auditoria.

Temos tr√™s principais agrupamentos de l√≥gica:

- **ciclo de vida do investimento**;
- **Controle do escore e inadimpl√™ncia**;
- \*Contrato e gatilhos.

No tocante √† legenda, entidades representam as entidades do _Database_ e o resto representam processos externos ou internos.

- Entidades principais s√£o a base do modelo de neg√≥cio;
- Entidades intermedi√°rias registram processamentos intermedi√°rios ou dados pr√©-processamento;
- Entidades secund√°rias armazenam dados sobre entidades principais, mas que fogem do escopo delas.

![Captura de tela 2025-09-29 005421.png](attachment:e62886b2-fbea-4ae0-a12f-178f139a7f2a:Captura_de_tela_2025-09-29_005421.png)

### I) Ciclo de Vida do Investimento (B)

Em resumo, podemos analisar o investimento linearmente:

- `Investidor` (j√° cadastrado e aprovado) entra no _Market_, escolhe uma empresa (_SaaS_) e √© acrescentado no contrato m√∫tuo, por meio de um `Investimento`.
- O investimento, de v√°rios investidores (_crowdlending_), √© passado como cr√©dito (d√≠vida) para o _SaaS_ por meio do `Contrato M√∫tuo`.
- Mensalmente, o tomador faz o dep√≥sito (idealmente de forma automatizada) da parcela, definindo o `Repagamento`.
- Este √© computado, ponderado entre os investidores de acordo com o investimento, e ent√£o repassado para o investidor, definido o `Repasse Investidor`.
- Por fim, o repasse √© depositado na conta do `Investidor`, encerrando o ciclo.

### II) Controle de Escore e Inadimpl√™ncia (A)

Este flow √© respons√°vel por atualizar dinamicamente o escore e guardar informa√ß√µes sobre m√©tricas mensais que influenciar√£o o contrato (como o MRR, na parcela).

Logo ap√≥s o onboarding, o Tomador entra com dados est√°ticos de sua situa√ß√£o cont√°bil e financeira atual (obriga√ß√µes de divida existentes, receita, caixa, etc.), que ser√° registrado em `Hist√≥rico Financeiro` e ter√° um papel importante para as regras de neg√≥cio que influenciar√£o o escore.

De forma din√¢mica, ent√£o, o principal fluxo se d√° por meio da entrada de dados pelas APIs:

- **Diariamente:** Agregando dados sobre _Usage_ (sa√∫de operacional e engajamento do cliente) e _billing_ (faturamento/cobran√ßa). Ser√£o as principais fontes para projetar a probabilidade de _churn_ e _default_.
- **Mensalmente:** API de sistema cont√°bil. Atualiza a rede sobre como est√£o progredindo os gastos da empresa, principalmente.

A partir dessas m√©tricas previstas e calculadas, ent√£o, atualizamos o escore periodicamente e verificamos se alguma dessas m√©tricas viola algum _covenant_.

### III) Contrato e Gatilhos (Centro)

Inicialmente, o `Contrato M√∫tuo` √© criado pelo `Tomador`. O contrato, ent√£o, √© atualizado por v√°rias dire√ß√µes:

- **Controle de Inadimpl√™ncia**: Periodicamente, o motor de ML faz duas verifica√ß√µes: _leading_ (probabilidade de _churn_) e _lagging_ (probabilidade de _default_, _runway_ e _multiple_). Se pelo menos uma dessas tr√™s m√©tricas indicar risco, ser√£o acionados os respectivos gatilhos.
- **Gatilhos**: Os gatilhos de _default_, uma vez acionados, atualizar√£o as _covenants_ (cl√°usulas ativas) do contrato: o _leading_ aciona medidas preventivas e de aten√ß√£o, como renegocia√ß√£o ou aumento de logging; o _lagging_ tem um significado mais cr√≠tico e pode levar a expans√£o da d√≠vida ou liquida√ß√£o imediata do contrato.

### 4.2. Vis√£o Geral (Diagrama)

Haja vista a necessidade de processamento de parcelas e contratos de forma rastre√°vel e audit√°vel, a escolha de um banco de dados relacional (o PostgreSQL) √© l√≥gica e natural. Abaixo, um esbo√ßo da rela√ß√£o entre entidades em um formato compacto do _schema_ geral:

![Captura de tela 2025-09-28 170142.png](attachment:86367689-9328-4512-8d80-7f8992b2a10b:Captura_de_tela_2025-09-28_170142.png)

Deixando claro que este √© um **esbo√ßo**. Ele est√° sujeito a mudan√ßa em features pontuais ou eventualmente a adi√ß√£o / reestrutura√ß√£o de uma tabela.

### 4.3. Arquitetura do Banco de Dados

Neste t√≥pico, discutimos sobre o prop√≥sito das tabelas e a origem de seus dados, dando destaque relevante para o relacionamento entre elas.

### I) Dados sobre o Usu√°rio (Credor / Devedor)

**Tabela:** **`Investidor`** e **`Tomador`**

- **Origem:** Onboarding (Valida√ß√£o de documentos, Reconhecimento Facial), e APIs de Bureaus de Cr√©dito.
- **Conte√∫do:** Dados de Identifica√ß√£o (`CNPJ`, `documento_identificacao`) e Perfis de Risco (`modelo_investimento`, `estagio_investimento`).
- **Motiva√ß√£o:** Estabelecer a **Conformidade Legal (KYC/AML)** e classificar o perfil de risco de ambos os lados para fins de _matching_ e _underwriting_.

**Tabela:** **`DadosBancarios`**

- **Origem:** Informa√ß√µes fornecidas no Onboarding e valida√ß√£o via sistemas PIX/SPB (para o `ispb`).
- **Conte√∫do:** Informa√ß√µes de conta (`banco`, `agencia`, `conta`) e o identificador (`ispb`).
- **Motiva√ß√£o:** Garantir o **KYC Operacional** e facilitar o fluxo de dinheiro de aporte e repasse de forma rastre√°vel.

**Tabela:** **`HistoricoFinanceiro`**

- **Origem:** Relat√≥rios submetidos pelo Tomador e verificados contra fontes externas (ERPs, Sistemas Cont√°beis).
- **Conte√∫do:** Demonstrativos Est√°ticos (`receita_liquida`, `ativo_total`, `patrimonio_liquido`) e Obriga√ß√µes de D√≠vida.
- **Motiva√ß√£o:** Servir como a base do **Underwriting inicial**, fornecendo o contexto de longo prazo para a sa√∫de financeira.

**Tabela:** **`ScoringTomador`**

- **Origem:** Output do **Motor de Risco (ML)** e/ou an√°lise manual.
- **Conte√∫do:** O **`escore`** calculado, o `tipo` (Inicial/Operacional) e o `metodo` (ML, Regra Fixa).
- **Motiva√ß√£o:** Armazenar o score de risco quantificado do Tomador, rastreando a evolu√ß√£o do risco da _due diligence_ inicial at√© o monitoramento cont√≠nuo.

### II) Dados sobre o Contrato (A L√≥gica do P2P RBF)

**Tabela:** **`ContratoMutuo`**

- **Origem:** Condi√ß√µes definidas pela plataforma e aprovadas pelo Tomador.
- **Conte√∫do:** Termos RBF (**`multiplo_cap`**, **`percentual_mrr`**) e status (`status_funding`, `status_contrato`).
- **Motiva√ß√£o:** **N√∫cleo do RBF:** Indexar o repagamento √† performance e garantir o teto de retorno (**Gatilho Anti-Equity**). O campo `ultima_metrica_mensal_id` liga o Contrato ao seu _snapshot_ de risco mais recente.

**Tabela:** **`Investimento`**

- **Origem:** Aporte de capital dos Investidores aprovados.
- **Conte√∫do:** Rela√ß√£o M:N entre `Investidor` e `ContratoMutuo`, incluindo o `valor_aportado` por Credor.
- **Motiva√ß√£o:** Provar a l√≥gica de **P2P Crowdlending**, permitindo que v√°rios credores financiem o mesmo Contrato.

**Tabela:** **`Repagamento`**

- **Origem:** Pagamento de parcela do Tomador.
- **Conte√∫do:** `valor_parcela` calculada com base no **`mrr_periodo`** e o progresso em rela√ß√£o ao **`multiplo_atingido`**.
- **Motiva√ß√£o:** Auditar a **natureza flex√≠vel** do RBF e rastrear o progresso em dire√ß√£o ao **Cap** (encerramento da d√≠vida).

**Tabela:** **`RepasseInvestidor`**

- **Origem:** Processamento da parcela de `Repagamento`.
- **Conte√∫do:** Distribui√ß√£o individual da parcela paga, separando `principal_devolvido` e `retorno_bruto`.
- **Motiva√ß√£o:** Essencial para fechar o ciclo do P2P, calculando e rastreando a **rentabilidade individual** do Investidor.

**Tabela:** **`CovenantViolado`**

- **Origem:** Disparo de regra ou algoritmo do Motor de Risco (ML) sobre os dados de `MetricaMensal`.
- **Conte√∫do:** `tipo_violacao` e `metrica_mensal_id` que identificou a falha do Contrato.
- **Motiva√ß√£o:** Formalizar o evento de estresse de risco, servindo como registro legal que justifica o acionamento de medidas contratuais.

### III) Dados sobre as M√©tricas

**Tabela:** **`MetricaTempoReal`**

- **Origem:** APIs de **Billing** (MRR, NRR), **Sistemas Cont√°beis** (OPEX) e **Usage** (Engajamento/Produto).
- **Conte√∫do:** Dados brutos de **alta frequ√™ncia** (`mrr`, `nrr`, `churn_rate`).
- **Motiva√ß√£o:** Servir como o _Data Streaming_ para alimentar o **Modelo ML** com **leading indicators** (o _momentum_ do risco).

**Tabela:** **`MetricaMensal`**

- **Origem:** Agrega√ß√£o e c√°lculo dos dados do `MetricaTempoReal`.
- **Conte√∫do:** Indicadores de estresse **agregados** (`cash_runway_meses`, `dscr_ajustado_mensal`, `net_burn_mensal`).
- **Motiva√ß√£o:** Servir como o _Data Warehouse_ do risco. Fonte est√°vel para **relat√≥rios, dashboards** e ponto de ativa√ß√£o formal dos **Covenants**.

### IV) Auditoria

**Tabela:** **`AuditLog`**

- **Origem:** _Triggers_ ou _hooks_ no Backend API que interceptam altera√ß√µes nas entidades financeiras.
- **Conte√∫do:** `entidade`, `entidade_id`, `acao` (`CREATE`, `UPDATE`, `DELETE`) e o _snapshot_ (`diff`) da mudan√ßa.
- **Motiva√ß√£o:** **Requisito de Conformidade Regulat√≥ria** que garante a rastreabilidade e a integridade de todas as transa√ß√µes e altera√ß√µes de status.

## 5. Escore de Cr√©dito e Covenants

### 5.1. Modelo: _Leading_ (ML)

Estes s√£o os "sinais de fuma√ßa". Eles v√™m principalmente das APIs de Usage e Billing e alimentam os modelos para prever problemas antes que eles apare√ßam no balan√ßo cont√°bil.

| M√©trica                                | O que Representa                                                                              | Fonte Principal         | A√ß√£o (Covenant)                                                                                                      |
| -------------------------------------- | --------------------------------------------------------------------------------------------- | ----------------------- | -------------------------------------------------------------------------------------------------------------------- |
| **Probabilidade de Default (ML)**\*    | O _output_ principal do seu ML. Probabilidade de falha nos pr√≥ximos 3-6 meses.                | **Motor de Risco (ML)** | **Gatilho de Alerta:** Aumenta a frequ√™ncia de relat√≥rios exigidos do Tomador ou inicia uma renegocia√ß√£o preventiva. |
| **Queda no Engajamento (WAU/DAU)**\*\* | Redu√ß√£o de usu√°rios ativos di√°rios/semanais (DAU/WAU) ou queda de uso de _features_ cr√≠ticas. | **API de Usage**        | **Alerta Operacional:** Indica perda de valor do produto, que levar√° ao _Churn_.                                     |
| **Taxa de _Dunning_**                  | Porcentagem de falhas de pagamento no ciclo de cobran√ßa (antes do _churn_ ser confirmado).    | **API de Billing**      | **Alerta de Cash Flow Imediato:** Indica fragilidade no _cash flow_ do Tomador, mesmo que o dinheiro acabe entrando. |
| **MRR Churn de Clientes Chave**        | _Churn_ ou _downgrade_ de clientes que representam uma alta % do MRR total.                   | **API de Billing**      | **Alerta de Concentra√ß√£o de Risco:** Exige relat√≥rio de plano de mitiga√ß√£o de risco de cliente.                      |

### 5.2. Modelo: _Lagging_ (Indicadores Cr√≠ticos)

Estes s√£o os dados consolidados, fechados no final do m√™s, que confirmam a efici√™ncia ou inefici√™ncia da empresa. S√£o a base para os Gatilhos de Default Cr√≠tico no contrato m√∫tuo.

| M√©trica                                | Significado                                                                                                 | Fonte Principal                       | A√ß√£o (Covenant)                                                                                                                                                       |
| -------------------------------------- | ----------------------------------------------------------------------------------------------------------- | ------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Runway (Meses)**                     | Proje√ß√£o mais recente de quantos meses o Tomador tem caixa.                                                 | **MetricaMensal / API de Accounting** | **Gatilho de Default Cr√≠tico:** Se menor que _X_ meses, aciona acelera√ß√£o da d√≠vida.                                                                                  |
| **Burn Multiple**                      | Efici√™ncia do gasto para gerar receita recorrente. Se for alto, indica inefici√™ncia.                        | **MetricaMensal / API de Accounting** | **Gatilho de Default de Efici√™ncia:** Se maior que _X_ por _Y_ trimestres, aciona aumento de juros ou novas condi√ß√µes.                                                |
| **Debt Service Coverage Ratio (DSCR)** | Capacidade da empresa de gerar lucro suficiente para cobrir os pagamentos da d√≠vida. Ser√° projetado por ML. | **Motor de ML**                       | **Gatilho de Default Financeiro:** Se menor que 1.0, a empresa n√£o est√° gerando caixa para pagar o principal e os juros, e uma liquida√ß√£o imediata pode ser acionada. |
| **Net Revenue Retention (NRR)**        | Crescimento de receita da base de clientes existente.                                                       | **MetricaMensal / API de Billing**    | **Gatilho de Crescimento:** Se menor que 100% por _Y_ meses (indicando contra√ß√£o da base), pode acionar um alerta ou revis√£o de termos.                               |

### 5.4. Escore e Regras de Neg√≥cio

O _escore_ √© o core de uma plataforma P2P, o verdadeiro motor para classificar as _SaaS_ quanto ao risco de ofertar cr√©dito e o retorno por isso.

O escore final √© uma fun√ß√£o ponderada que combina o motor de ML com m√©tricas peri√≥dicas e a estabilidade contratual:

| Componente do Risco                | Fonte                                                           | Peso    |
| ---------------------------------- | --------------------------------------------------------------- | ------- |
| **Risco Preditivo (ML)**           | Probabilidade de Default\*, DSCR                                | **40%** |
| **Risco Estrutural (_Lagging_)**   | Runway, Burn Multiple                                           | **50%** |
| **Risco Est√°tico (KYC/Hist√≥rico)** | Hist√≥rico de d√≠vidas, Est√°gio de Investimento (S√©rie A/B), etc. | **10%** |

A componente preditiva (ML) √© o insumo secund√°rio para o escore final devido a objetividade de sua m√©trica para o modelo de neg√≥cio em si (a probabilidade de inadimpl√™ncia), mas sua margem para erros e problemas de interpreta√ß√£o mesmo nos melhores modelos.

A componente de _lagging_ tem a principal relev√¢ncia por estar fortemente associada ao fluxo de caixa da empresa, e portanto √† sua efici√™ncia operacional. √â a base de como a performance da empresa reflete o seu futuro naquele _snap_.

A componente de risco est√°tico tem uma componente m√≠nima, mas n√£o desprez√≠vel, por guardar caracter√≠sticas relevantes sobre o _SaaS_ e a empresa em si, mas de car√°cter est√°tico.

**N√£o ser√° implementado no escopo deste Hackathon.
** M√©trica opcional para o tomador.\*

## 6. Conex√£o com o Tomador e Motor de Proje√ß√µes

### 6.1. Formato dos Dados: Tabelas de M√©trica e APIs Externas

Ap√≥s a consulta de alguns empreendedores na √°rea de SaaS, chegamos √† conclus√£o de que SaaS em S√©rie A ou B ainda n√£o possuem necessariamente a maturidade para necessitar de uma API de _feature usage_, frequentemente tendo seus servi√ßos satisfeitos por simples tabelas de logging. Nesse sentido, as **APIs de _Usage_ se tornar√£o informa√ß√µes opcionais** cuja adi√ß√£o contar√° positivamente para a avalia√ß√£o do escore (mais dados, menor o risco inesperado), de modo a n√£o se provar impeditiva para o engajamento no app.

A base, portanto, e que ser√° o MVP deste hackathon, consistir√° nas informa√ß√µes provenientes das APIs de _billing_ e de sistemas cont√°beis. Usaremos o **Stripe Billing** como _PoC_ e mockaremos os dados cont√°beis, como CAC.

### 6.2. APIs RESTful para o Stripe (endpoints)

Os dados que coletaremos para este MVP ser√£o a base da previs√£o do MRR futuro: **MRR Hist√≥rico**, **Taxa de Dunning**, **LTV**, **NRR** e **Churn Rate**. Para isso, precisamos de alguns dados brutos, detalhados a seguir.

### I) Subscription

Dados de Identifica√ß√£o e Linha do Tempo (LTV, Churn):

| Campo                      | Utilidade e M√©trica Relacionada                                                                                                                                                          |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`id`**                   | **Identificador √önico.** Essencial para refer√™ncia em outros objetos (`Event`, `Invoice`) e para rastrear a assinatura ao longo do tempo.                                                |
| **`customer`**             | **ID do Cliente.** **Fundamental para LTV e Churn de Clientes.** Permite agrupar todas as receitas e assinaturas sob um √∫nico cliente.                                                   |
| **`created`**              | **Data de Cria√ß√£o.** Usado para calcular o **tempo de vida** do cliente para o **LTV** (junto com a data de cancelamento).                                                               |
| **`status`**               | **Status da Assinatura.** Essencial. Diz se essa receita est√° **ativa** (MRR base). Se fosse `canceled` (Churn) ou `past_due` (Dunning), seria tratado de forma diferente no seu modelo. |
| **`canceled_at`**          | **Data de Cancelamento.** Se n√£o for `null`, indica a data exata do **Churn** (Receita e Cliente).                                                                                       |
| **`cancel_at_period_end`** | **Churn Agendado.** Se for `true`, indica uma perda de receita futura que deve ser considerada na proje√ß√£o de **Runway** e **MRR Churn** para o pr√≥ximo per√≠odo.                         |
| **`current_period_end`**   | **Fim do Ciclo.** Usado para calcular a data da pr√≥xima renova√ß√£o/fatura. Fundamental para a proje√ß√£o de **Runway**.                                                                     |
| **`latest_invoice`**       | **Fatura Mais Recente.** Ajuda a cruzar rapidamente com o objeto `Invoice` para fins de **Dunning** e **LTV** (Receita Total).                                                           |

Dados de Valor e Recorr√™ncia (MRR e NRR):

| Campo                | Caminho no JSON                                | Utilidade e M√©trica Relacionada                                                                                                          |
| -------------------- | ---------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| **`unit_amount`**    | `items.data[0].price.unit_amount`              | **Valor da Cobran√ßa.** O valor total em centavos (`1000` centavos = $10.00). **Principal insumo para o MRR.**                            |
| **`currency`**       | `items.data[0].price.currency`                 | **Moeda.** Essencial para a **normaliza√ß√£o** em seus relat√≥rios.                                                                         |
| **`interval`**       | `items.data[0].price.recurring.interval`       | **Frequ√™ncia.** `month` (mensal). Usado para **normalizar o MRR** (dividir o `unit_amount` para a base mensal).                          |
| **`interval_count`** | `items.data[0].price.recurring.interval_count` | **Contagem da Frequ√™ncia.** `1` (a cada 1 m√™s). Usado para normaliza√ß√£o (ex: se fosse `3` e `interval` fosse `month`, seria trimestral). |
| **`quantity`**       | `items.data[0].quantity`                       | **Quantidade.** O multiplicador do pre√ßo. Fundamental para o **MRR Expans√£o/Contra√ß√£o** por uso ou licen√ßa.                              |

Estes campos est√£o aninhados em `items.data[0].price` (ou `plan`)

### II) Event

### III) Price

### IV) Customer

### V) Invoice

### 6.3. Tend√™ncia do DSCR e Runway

### I) Proje√ß√£o do MRR (Receita)

### II) Proje√ß√£o do OPEX (Custos)

### III) Os Modelos Finais

## 7. Core Market: Match Investidor-Tomador

O processo de matching opera em quatro fases: (1) Origina√ß√£o da Proposta, (2) Discovery no Marketplace, (3) Pooling de Capital, e (4) Monitoramento Cont√≠nuo.

### 7.1. Origina√ß√£o da Proposta (Tomador)

O tomador submete sua solicita√ß√£o via wizard de 4 steps:

![image.png](attachment:6786d058-b3ea-449d-b4c1-3026b3b59e15:image.png)

**Step 1 - Parametriza√ß√£o:**

- Valor solicitado (limitado pelo score)
- Prop√≥sito do capital (marketing, contrata√ß√µes, infraestrutura, etc.)

**Step 2 - Valida√ß√£o de Conectividade (Bloqueante):**

- **Billing (Obrigat√≥rio):**¬†OAuth com Stripe/Chargebee para acesso ao MRR, NRR, Churn
  - Sem integra√ß√£o ‚Üí¬†**fluxo bloqueado**
- **ERP (Recomendado):**¬†Sistema cont√°bil para OPEX e runway
  - Sem integra√ß√£o ‚Üí penaliza√ß√£o de -10 a -15 pontos no score

**Step 3 - Simula√ß√£o:**¬†Motor de scoring calcula em tempo real:

- M√∫ltiplo (Cap): ex. 1.28x para score 87/100
- Taxa: ex. 4.2% do MRR
- Proje√ß√µes em 3 cen√°rios (conservador/base/otimista)

**Step 4 - Confirma√ß√£o:**

- Revis√£o de termos
- Aceita√ß√£o de covenants
- Submiss√£o ao marketplace
- Status:¬†`status_funding = 'pendente'`¬†|¬†`status_contrato = 'inativo'`

### 7.2. Discovery no Marketplace (Investidor)

Uma vez aprovado o contrato, ele √© submetido ao nosso _Marketplace_ de rodadas de cr√©dito, que √© a principal interface de contato entre tomador e investidor.

![image.png](attachment:ba95c4dd-2271-448b-ae23-c8b6f3c1d700:image.png)

O investidor navega na Interface de busca com tr√™s mecanismos:

**A) Busca Sem√¢ntica:**

NLP para queries em linguagem natural (ex: "SaaS B2B NRR >110%")

**B) Filtros:**

- Score (70-100, tiers: üü¢>85, üü°70-84, üî¥<70)
- Valor (R$10k-500k)
- Stage (S√©rie A/B)
- Setor (SaaS B2B/B2C, E-commerce)
- Status de Funding (<50%, 50-75%, >75%)

**C) Ordena√ß√£o:**

- Menor risco (score desc)
- Maior retorno (m√∫ltiplo √ó prazo)

**Card de Proposta:**

```
TechSaaS Analytics | S√©rie A | B2B | üü¢ 87/100
R$ 150k solicitados | Cap 1.28x | Taxa 4.2%
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 67% financiado (R$ 100.5k)
MRR: 182k | NRR: 112% | Churn: 2.1%
[Ver Detalhes ‚Üí]

```

### 7.3. Due Diligence (Investidor)

P√°gina de detalhamento com data room completo:

**Se√ß√µes:**

**A) Header:**¬†Nome, setor, score, links (site, redes sociais, etc)

**B) M√©tricas Operacionais:**¬†Gr√°ficos de evolu√ß√£o (12 meses)

- MRR Growth (% m/m)
- NRR Trend
- Churn Rate (volunt√°rio vs involunt√°rio)
- LTV/CAC

**C) Hist√≥rico na Plataforma:**

- Contratos anteriores (qtd, valor m√©dio, taxa de atraso)
- Performance de repagamento
- Covenants acionados

### 7.4. Pooling de Capital

**Restri√ß√£o regulat√≥ria:**¬†M√°ximo R$ 15k por investidor/contrato (SEP).

**Fluxo:**

1. Investidor seleciona valor (R$ 1k - R$ 15k)
2. Pagamento via PIX ou d√©bito de carteira
3. Registro em¬†`Investimento`¬†(M:N)
4. C√°lculo de participa√ß√£o:¬†`valor_aportado / valor_total`

**Threshold de Ativa√ß√£o (75%):**¬†Tomador ativa quando pool ‚â• 75% do valor solicitado.

**Ao ativar:**

- `status_funding`¬†‚Üí¬†`'completo'`
- `status_contrato`¬†‚Üí¬†`'ativo'`
- Emiss√£o em blockchain (Se√ß√£o 8)
- Transfer√™ncia do capital (24-48h)

### 7.5. Monitoramento Cont√≠nuo

### I) Dashboard do Investidor

1. P√°gina ‚ÄúEvolu√ß√£o‚Äù :

   - Performance da carteira, Total investido, recebido, TIR m√©dia
   - **Gr√°fico Temporal:**¬†Recebimentos mensais + proje√ß√£o futura
   - **Tabela de Contratos:**¬†Progresso, valor, empresa, prazo ‚Üí expand√≠vel para tela com m√©tricas aprofundadas e detalhes do contrato.

   ![image.png](attachment:58d78f1a-6204-4906-bd9e-b668fe0c6010:image.png)

2. P√°gina Pagamentos:

   - Gr√°fico com visualiza√ß√£o de hist√≥rico de pagamentos e proje√ß√µes
   - Pr√≥ximos pagamentos
   - Contratos em detalhes.

   ![image.png](attachment:54e2b66b-3fbc-4689-8268-b80d89fa3e73:image.png)

**Pr√≥ximos Recebimentos:**

![image.png](attachment:d5a429d3-bf0c-4dee-8344-e13fc997cbc5:image.png)

### II) Dashboard do Tomador

![image.png](attachment:20748f29-afec-4bbe-aab6-36b6c6935e52:image.png)

1. P√°gina ‚ÄúMinhas d√≠vidas‚Äù:
   - Propostas em aberto
   - Solicita√ß√£o de novo empr√©stimo
   - Acompanhamento dos contratos, progresso, pr√≥ximos pagamentos
2. P√°gina ‚ÄúMeus Pagamentos‚Äù:
   - Cards com pr√≥ximos pagamentos, proje√ß√µes para os meses seguintes
   - Hist√≥rico de pagamentos
3. P√°gina ‚ÄúMeu score‚Äù:
   - Acompanhamento do Score ‚Üí racional por tr√°s
   - Sugest√µes para aumentar o seu score.
4. P√°gina ‚ÄúMeu neg√≥cio‚Äù:
   - Visualiza√ß√£o da sa√∫de financeira do SaaS ( MRR, ARR, Churn, CAC, LTV)
   - Previs√£o de m√©tricas

### 7.6. Fluxo Sist√™mico

```
TOMADOR ‚Üí Solicita ‚Üí PROPOSTA ‚Üí MARKETPLACE
                          ‚Üì
                    INVESTIDOR ‚Üí Descobre
                          ‚Üì
                      POOL ‚Üí Funding (‚â•75%)
                          ‚Üì
                    CONTRATO ATIVO
                          ‚Üì
          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     TOMADOR                          INVESTIDOR
    Paga Parcelas                 Recebe Repasses
    Monitora Health              Monitora Portf√≥lio

```

**M√©tricas-chave:**

- Time-to-Fund: 48-72h (submiss√£o ‚Üí ativa√ß√£o)
- Fill Rate: % de propostas que atingem 100%
- Default Rate por Score Tier

## 8. Blockchain: Transpar√™ncia e Automa√ß√£o Por Baixo dos Panos

### 8.1. Blockchain e RBF

### I) Por que blockchain

Revenue Based Funding depende fundamentalmente da confian√ßa entre investidores e tomadores sobre dados de receita reais. Bancos tradicionais falham neste mercado porque n√£o conseguem validar ou auditar MRR de empresas SaaS de forma transparente, criando assimetria de informa√ß√£o que resulta em rejei√ß√£o de 80% dos pedidos de cr√©dito. Blockchain resolve este problema criando um registro imut√°vel e audit√°vel de todas as transa√ß√µes financeiras, eliminando disputas sobre valores pagos e recebidos.

- **Transpar√™ncia audit√°vel**: Todos os pagamentos mensais baseados em MRR ficam registrados publicamente, eliminando disputas sobre valores
- **Automa√ß√£o de pagamentos**: Smart contracts executam repasses automaticamente quando or√°culos atualizam MRR, sem interven√ß√£o manual
- **Fracionamento transparente**: Investidores veem exatamente sua participa√ß√£o e recebimentos proporcionais em tempo real
- **Compliance**: Registro imut√°vel facilita auditoria para Banco Central e investidores

### II) Como usaremos blockchain (Abstraction e Login social)

A maior barreira para ado√ß√£o de blockchain em finan√ßas √© a complexidade t√©cnica que afasta 95% dos usu√°rios potenciais. Nossa estrat√©gia √© tornar blockchain completamente invis√≠vel atrav√©s de Account Abstraction, permitindo que usu√°rios interajam com contratos inteligentes atrav√©s de interfaces familiares como login social e transa√ß√µes em reais. Esta abordagem democratiza acesso a tecnologia avan√ßada sem exigir conhecimento t√©cnico.

- **Account Abstraction (EIP-4337)**: Usu√°rios fazem login com Google/email, sistema cria carteira invis√≠vel automaticamente
- **Gasless transactions**: Plataforma paga gas fees, cobra taxa em reais via PIX posteriormente
- **Web3Auth**: Gerencia identidade social ‚Üí carteira mapping, permite recupera√ß√£o por email
- **Meta-transactions**: Usu√°rios assinam inten√ß√µes, relayer executa transa√ß√µes na blockchain

### III) Integra√ß√£o Blockchain e RBF: ChainLink e Or√°culos

RBF precisa de m√©tricas de receita em tempo real para calcular pagamentos vari√°veis mensais, mas smart contracts n√£o conseguem acessar APIs externas nativamente devido ao problema do oracle. Para integrar blockchain com dados externos de billing (ChartMogul, Stripe), usaremos or√°culos descentralizados como Chainlink, que permitem valida√ß√£o confi√°vel de dados off-chain e automa√ß√£o completa do ciclo de pagamentos baseado na performance real das empresas.

- **Chainlink Functions**: Executa c√≥digo customizado mensal que consulta API de billing da empresa (ChartMogul, Stripe)
- **Oracle node dedicado**: Valida MRR atrav√©s de m√∫ltiplas fontes, submete dados para smart contracts
- **Pagamento autom√°tico**: Quando oracle atualiza MRR, smart contract calcula e distribui pagamentos proporcionalmente
- **Dados audit√°veis**: Hist√≥rico de MRR fica on-chain, investidores verificam sa√∫de da empresa independentemente

### 8.2. O que ser√° feito

### I) Fluxos principais

O sistema completo requer tr√™s fluxos fundamentais que cobrem todo o ciclo de vida do investimento RBF. Primeiro, precisamos abstrair a complexidade de criar carteiras blockchain para usu√°rios tradicionais. Segundo, devemos gerenciar o processo de funding colaborativo at√© ativa√ß√£o do contrato inteligente. Terceiro, automatizar completamente a distribui√ß√£o de pagamentos baseada em dados reais de receita, eliminando intermedi√°rios e garantindo transpar√™ncia total.

Seus 3 fluxos est√£o¬†**corretos**¬†e cobrem todo o ciclo:

**1. Fluxo de cria√ß√£o de carteira**

- Login social (Google/email) ‚Üí Web3Auth cria carteira invis√≠vel
- KYC tradicional + binding carteira blockchain ao usu√°rio
- Zero conhecimento t√©cnico necess√°rio

**2. Fluxo de transa√ß√£o ‚Üí ativa√ß√£o do contrato**

- Factory Contract: escrow off-chain at√© atingir threshold (75%)
- Deploy autom√°tico: cria contrato RBF individual quando funding completo
- Transfer√™ncia at√¥mica: fundos escrow ‚Üí contrato ativo

**3. Fluxo de repasse para investidores**

- Oracle atualiza MRR mensalmente
- Smart contract calcula pagamento (MRR √ó percentual acordado)
- Distribui√ß√£o autom√°tica proporcional para todos os investidores

### II) Escopo hackathon ‚Üí demonstrar esses fluxos

Um hackathon exige demonstra√ß√£o tang√≠vel de valor em tempo limitado, focando na prova de conceito dos fluxos mais impactantes. Nosso MVP em 48 horas demonstrar√° todos os tr√™s fluxos principais com dados simulados mas real√≠sticos, permitindo que ju√≠zes vejam a solu√ß√£o funcionando end-to-end. A demonstra√ß√£o precisa ser visual, interativa e mostrar claramente o diferencial competitivo da transpar√™ncia blockchain.

**MVP em 48h**: Demonstrar os 3 fluxos completos com dados mockados

- **Fluxo 1**: Login com Google, carteira criada automaticamente
- **Fluxo 2**: Investimento em pool, deploy quando 100% atingido, transa√ß√£o vis√≠vel no Etherscan
- **Fluxo 3**: Simula√ß√£o de pagamento mensal com Oracle mockado, distribui√ß√£o para investidores

**Demo script**: 5 minutos mostrando empresa SaaS solicitando cr√©dito ‚Üí investidores investindo ‚Üí contrato deployado ‚Üí pagamento autom√°tico executado

### 8.3. Como ser√° feito?

### I) Stack que ser√° usada e por que

A escolha do stack tecnol√≥gico balan√ßa velocidade de desenvolvimento para hackathon com robustez necess√°ria para escalabilidade futura. Priorizamos ferramentas maduras com boa documenta√ß√£o e integra√ß√£o TypeScript nativa, permitindo que a equipe implemente rapidamente sem sacrificar qualidade t√©cnica. Polygon oferece transa√ß√µes r√°pidas e baratas essenciais para boa UX, enquanto Web3Auth simplifica drasticamente a experi√™ncia de onboarding.

**Blockchain:**

- **Solidity 0.8.19**: Smart contracts (Factory + RBF individual)
- **Hardhat**: Development framework, testing, deployment
- **OpenZeppelin**: Bibliotecas seguras (Ownable, ReentrancyGuard)
- **Polygon Mumbai**: Testnet para hackathon (transa√ß√µes r√°pidas, gratuitas)

**Account Abstraction:**

- **Web3Auth SFA**: Social login ‚Üí carteira mapping
- **Biconomy SDK**: Gasless transactions, meta-transactions
- **Ethers.js v6**: Intera√ß√£o Web3 (mais leve que Web3.js)

**Oracle Integration:**

- **Chainlink Functions**¬†(hackathon): Oracle simulado para MRR
- **Custom API**: Mock ChartMogul/Stripe responses
- **Cron job**: Simula updates mensais em intervalo acelerado (30s)

### II) Conex√£o com o restante do projeto (TypeScript)

A integra√ß√£o blockchain deve ser transparente para o restante da aplica√ß√£o TypeScript, exposta atrav√©s de interfaces bem definidas que abstraem complexidade Web3. Esta arquitetura permite que desenvolvedores frontend trabalhem com objetos JavaScript familiares enquanto toda a l√≥gica blockchain fica encapsulada em servi√ßos especializados. Real-time updates via WebSocket garantem que dashboards reflitam mudan√ßas de estado blockchain instantaneamente.

**Integra√ß√£o com backend TypeScript:**

```tsx
typescript*// types/blockchain.ts*
export interface RBFContract {
  address: string;
  company: string;
  totalAmount: bigint;
  currentMRR: bigint;
  investors: InvestorShare[];
}

*// services/blockchain.service.ts*
export class BlockchainService {
  async createCreditRequest(params: CreditParams): Promise<string>
  async investInCredit(creditId: string, amount: bigint): Promise<void>
  async getContractStatus(address: string): Promise<RBFContract>
}

*// hooks/useBlockchain.ts - React hooks para frontend*
export const useRBFContract = (address: string) => {
  const [contract, setContract] = useState<RBFContract>();
  *// WebSocket para updates em tempo real*
}

```

**Arquitetura de servi√ßos:**

- **blockchain.service.ts**: Abstrai toda intera√ß√£o Web3
- **oracle.service.ts**: Simula dados MRR e trigger pagamentos
- **wallet.service.ts**: Gerencia Web3Auth e Account Abstraction
- **notification.service.ts**: WebSocket para updates em tempo real

**Pipeline de dados:**

1. Frontend TypeScript ‚Üí blockchain.service.ts
2. blockchain.service.ts ‚Üí Ethers.js ‚Üí Smart Contract
3. Oracle service ‚Üí Smart Contract ‚Üí Webhook ‚Üí Frontend update
4. Real-time dashboard via WebSocket para mostrar transa√ß√µes live

**Demonstra√ß√£o t√©cnica**: Console browser mostrando logs de transa√ß√µes, Etherscan links para verifica√ß√£o, dashboard atualizando automaticamente quando Oracle trigger pagamentos.

## 9. Arquitetura T√©cnica e Deploy

### 9.1. Frontend

- _Linguagem_: Typescript
- _Framework_: React

A escolha de **Typescript** com **React** para o _frontend_ √© a combina√ß√£o ideal para aplica√ß√µes complexas, garantindo escalabilidade e manuten√ß√£o a longo prazo. O Typescript adiciona tipagem est√°tica, que √© crucial para minimizar erros em uma aplica√ß√£o financeira onde a precis√£o √© vital, enquanto o React oferece uma biblioteca robusta para construir interfaces de usu√°rio din√¢micas (como dashboards de risco e pain√©is de investimento).

### 9.2. Backend (core app)

- _Linguagem_: Typescript
- _Framework_: Next.js

A decis√£o por TypeScript foi pela tipagem nativa. Com dados tipados, garantimos seguran√ßa e estabilidade, essenciais para um servi√ßo financeiro robusto. Al√©m disso, ao usar TypeScript no backend, n√≥s

### 9.3. Backend (Python - ML)

- _Linguagem_: Python
- _Arquitetura_: Notebooks, Pipelines e Makefile

A decis√£o de isolar a l√≥gica de Machine Learning em **Python** √© praticamente obrigat√≥ria, pois esta √© a l√≠ngua franca da ci√™ncia de dados, oferecendo o ecossistema mais rico de bibliotecas para modelos preditivos e processamento de dados. A arquitetura de **Notebooks** e **Pipelines** √© ideal para o projeto: _Notebooks_ para pesquisa e desenvolvimento dos modelos de _scoring_ (Probabilidade de Default, Proje√ß√£o do DSCR), e Pipelines (automatizados por Makefile) para produ√ß√£o, garantindo que o seu motor de risco seja treinado, versionado e executado de forma consistente e audit√°vel.
